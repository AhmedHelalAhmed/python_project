<!DOCTYPE html>
{% load staticfiles %}
<html>
<head>
    <!-- Required meta tags for Bootstrap -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title>
        Post Page
    </title>

    <style>

        /*.comment_area {*/

        /*border: 2px solid #bbb;*/

        /*}*/

    </style>
</head>

<body>
<!-- Navigation Bar -->

<nav class=" sticky-top navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">Navbar</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
            <li class="nav-item active">
                <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Features</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Pricing</a>
            </li>
            <li class="nav-item">
                <a class="nav-link disabled" href="#">Disabled</a>
            </li>
        </ul>
    </div>
</nav>

<div class="container">
    <div class="row mt-5">
        <!-- Sidebar -->
        <div class="list-group col-4 col-xl-3 mt-2">
            <a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
                <div class="d-flex w-100 justify-content-between">
                    <h5 class="mb-1">List group item heading</h5>
                    <small>3 days ago</small>
                </div>
                <p class="mb-1">Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius
                    blandit.</p>
                <small>Donec id elit non mi porta.</small>
            </a>
            <a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
                <div class="d-flex w-100 justify-content-between">
                    <h5 class="mb-1">List group item heading</h5>
                    <small class="text-muted">3 days ago</small>
                </div>
                <p class="mb-1">Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius
                    blandit.</p>
                <small class="text-muted">Donec id elit non mi porta.</small>
            </a>
            <a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
                <div class="d-flex w-100 justify-content-between">
                    <h5 class="mb-1">List group item heading</h5>
                    <small class="text-muted">3 days ago</small>
                </div>
                <p class="mb-1">Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius
                    blandit.</p>
                <small class="text-muted">Donec id elit non mi porta.</small>
            </a>
        </div>
        <!-- Article -->
        <div class="text-center col-8 col-xl-9 mt-2">
            <h1>Title of the post</h1>
            <div style="height:500px">
                <img class="mw-100 mh-100" src="sources/images/technology1.jpg"></img>
            </div>
            <p class="mt-1">Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque
                laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae
                vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit,
                sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est,
                qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi
                tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis
                nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur?
                Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur,
                vel illum qui dolorem eum fugiat quo voluptas nulla pariatur</p>
        </div>
    </div>
    <br/><br/><br/><br/><br/>

    <center>
        <h1>here is the comments</h1>
        <form method="POST">{% csrf_token %}
            {{ form.errors }}
            {{ form.comment_content }}
            <!--{{ form.as_p }}-->
            <div>

                <button type="submit" class="btn btn-primary mb-2">Add comment</button>
            </div>


        </form>
    </center>

    <br/><br/><br/><br/><br/>

    <div class="comment_area">
        <h3 class="border-bottom border-gray pb-2 mb-0 text-left" style=' width: 200px'>Comments</h3>

        <!--i will modify the img field later-->
        {% for comment in comments %}

        <div class="media text-muted pt-3">
            <img data-src="holder.js/32x32?theme=thumb&amp;
            bg=007bff&amp;fg=007bff&amp;size=1" alt="32x32"
                 class="mr-2 rounded" style="width: 32px;
                  height: 32px;" src="{%  static 'bloggawy/images/commentphoto.png' %}" data-holder-rendered="true">
            <p style='padding: 3px; word-break: break-all; word-wrap: break-word;' class="media-body pb-3 mb-0 small lh-125 border-bottom border-gray col-6 col-md-8" width="100">
                <strong class="d-block text-gray-dark">@{{comment.comment_user.username}} on {{comment.comment_time}}</strong>

            {{ comment.comment_content|linebreaksbr }}

            </p>
        </div>

        {% endfor %}


    </div>

    <!--enhancement make the url with ajax-->
    <small class="d-block text-right mt-3">
<!--this is enhancement-->
        <a href="#">All comments</a>
    </small>


    <!-- Pagination -->
    <div class="row">
        <div class="col-6"></div>
        <div class="text-center col-6">
            <nav aria-label="Page navigation example">
                <ul class="pagination">
                    <li class="page-item">
                        <a class="page-link" href="#" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                            <span class="sr-only">Previous</span>
                        </a>
                    </li>
                    <li class="page-item"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                            <span class="sr-only">Next</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>

<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
<script>

    // prevent enter key from submit the comment form
    //     document.getElementById('id_comment_content').addEventListener('keypress', function (event)
    //     {
    //         // enterkey
    //         if (event.keyCode == 13) {
    //             event.preventDefault();
    //         }
    //     });

    // for make the textarea extends with each enter
    $('#id_comment_content').on("keyup", function () {
        var maxrows = 10;
        var txt = this.value;
        var cols = this.cols;

        var arraytxt = txt.split('\n');
        var rows = arraytxt.length;

        for (i = 0; i < arraytxt.length; i++) {
            rows += parseInt(arraytxt[i].length / cols);
        }

        if (rows > maxrows) {
            this.rows = maxrows;
        }
        else {
            this.rows = rows;
        }
    });


</script>
</body>
</html>